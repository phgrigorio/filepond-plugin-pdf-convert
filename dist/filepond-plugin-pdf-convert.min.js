/*!
 * FilePondPluginPdfConvert 1.0.3
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://github.com/alexandreDavid/filepond-plugin-pdf-convert#readme for details.
 */
/* eslint-disable */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).FilePondPluginPdfConvert=t()}(this,(function(){"use strict";const e=(e,t,n)=>{const i=[],o=[];let d=0,r=0;return new Promise(((n,a)=>{if("undefined"==typeof pdfjsLib){const e="The library PDF.js is required to convert PDF in image";return console.warn(e),void a(e)}try{const a=new FileReader;a.onload=async function(){const a=new Uint8Array(this.result),s=await pdfjsLib.getDocument(a).promise;!async function(){const a=await s.getPage(1),c=a.getViewport({scale:1.5}),u=document.createElement("canvas"),f=u.getContext("2d"),p={canvasContext:f,viewport:c};u.height=c.height,u.width=c.width,await a.render(p).promise,i.push(f.getImageData(0,0,u.width,u.height)),o.push(r),r+=u.height,d<u.width&&(d=u.width);const h=atob(u.toDataURL(t).split(",")[1]),l=[];for(let e=0;e<h.length;e++)l.push(h.charCodeAt(e));const w=new Blob([new Uint8Array(l)],{type:t});n(new File([w],e.name,{type:t}))}()},a.readAsArrayBuffer(e)}catch(e){a(e)}}))},t=({addFilter:t,utils:n})=>{const{Type:i}=n;return t("LOAD_FILE",((t,{query:n})=>new Promise(((i,o)=>{(e=>/pdf$/.test(e.type))(t)?e(t,n("GET_PDF_CONVERT_TYPE"),n("GET_PDF_CONVERT_MARGIN_HEIGHT")).then((function(e){i(e)})).catch((()=>i(t))):i(t)})))),{options:{pdfConvertType:["image/png",i.STRING],pdfConvertMarginHeight:[30,i.NUMBER]}}};return"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:t})),t}));
