/*!
 * FilePondPluginPdfConvert 1.0.3
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://github.com/alexandreDavid/filepond-plugin-pdf-convert#readme for details.
 */
/* eslint-disable */

const e=(e,t,n)=>{const i=[],o=[];let a=0,r=0;return new Promise(((n,d)=>{if("undefined"==typeof pdfjsLib){const e="The library PDF.js is required to convert PDF in image";return console.warn(e),void d(e)}try{const d=new FileReader;d.onload=async function(){const d=new Uint8Array(this.result),s=await pdfjsLib.getDocument(d).promise;!async function(){const d=await s.getPage(1),c=d.getViewport({scale:1.5}),h=document.createElement("canvas"),p=h.getContext("2d"),u={canvasContext:p,viewport:c};h.height=c.height,h.width=c.width,await d.render(u).promise,i.push(p.getImageData(0,0,h.width,h.height)),o.push(r),r+=h.height,a<h.width&&(a=h.width);const w=atob(h.toDataURL(t).split(",")[1]),l=[];for(let e=0;e<w.length;e++)l.push(w.charCodeAt(e));const g=new Blob([new Uint8Array(l)],{type:t});n(new File([g],e.name,{type:t}))}()},d.readAsArrayBuffer(e)}catch(e){d(e)}}))},t=({addFilter:t,utils:n})=>{const{Type:i}=n;return t("LOAD_FILE",((t,{query:n})=>new Promise(((i,o)=>{(e=>/pdf$/.test(e.type))(t)?e(t,n("GET_PDF_CONVERT_TYPE"),n("GET_PDF_CONVERT_MARGIN_HEIGHT")).then((function(e){i(e)})).catch((()=>i(t))):i(t)})))),{options:{pdfConvertType:["image/png",i.STRING],pdfConvertMarginHeight:[30,i.NUMBER]}}};"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:t}));export default t;
